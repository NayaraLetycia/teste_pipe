name: CI - Hello

on:
  push:

jobs:
  hello:
    runs-on: ubuntu-latest

    env:
      APP_NAME: teste_pipe
      ENVIRONMENT: ci
      
    steps:
      - name: Checkout do repositório
        uses: actions/checkout@v4

      - name: Verificações básicas do repositório
        run: |
          test -f README.md || (echo "ERRO: README.md não existe" && exit 1)
          echo "OK: README.md existe"

      - name: Listar arquivos do repo
        run: |
          pwd
          ls -la

      - name: Usando variáveis de ambiente
        run: |
          echo "Aplicação: $APP_NAME"
          echo "Ambiente: $ENVIRONMENT"
          echo "Branch: $GITHUB_REF_NAME"

      - name: Usando secret sem vazar
        env:
          MY_SECRET: ${{secrets.MY_SECRET}}
        run: |
          if [ -z "$MY_SECRET" ]; then
            echo "Erro: Secret não foi carregada"
            exit 1
          fi
          echo "OK: secret carregada"
